"use strict";$(function(){function n(){for(var n=[],i=0,a=0,e=0;e<$(".order_lists").size();e++)$(".order_content ul").eq(e).find("input").prop("checked")&&n.push(e);for(var t=0;t<n.length;t++){var s=1*$(".amount_box").eq(n[t]).find("input").val();i+=s,a+=s*$(".price").eq(n[t]).html().slice(1)*1}$(".piece_num").html(i),$(".total_text").html("￥"+a)}$.ajax({url:"../api/login.php",type:"post",async:!0,data:{leixing:"showGouwuche"},success:function(n){var i=JSON.parse(n);if(console.log(i),i){var a=i.list2.map(function(n){return'\n        \t\t\t\t<ul class="order_lists" id="good_'+n.id+'">\n        \t\t\t\t<li class="list_chk">\n                        <input type="checkbox" id="checkbox_'+n.id+'" class="son_check">\n                        <label for="checkbox_'+n.id+'"></label>\n                    </li>\n                    <li class="list_con">\n                        <div class="list_img"><a href="javascript:;"><img src="../img/'+n.img1+'" alt=""></a></div>\n                        <div class="list_text"><a href="javascript:;">\n                       \n                        <span class ="pinpai"> '+n.brand+'</span>\n                        <span class="xilie">'+n.xilie+'</span>\n                        <span class="xinghao">'+n.xinghao+'</span>\n                        <span class="jixie">'+n.jiexie+'</span>\n                        \n                        </a>\n                            <a href="javascript:;" class="waibiao">'+n.waibiao+'</a>\n                        </div>\n                    </li>\n                    \n                    <li class="list_price">\n                        <p class="price">￥'+n.tejia+'</p>\n                    </li>\n                    <li class="list_amount">\n                        <div class="amount_box">\n                            <a href="javascript:;" class="reduce reSty">-</a>\n                            <input type="text" value="'+n.shuliang+'" class="sum">\n                            <a href="javascript:;" class="plus">+</a>\n                        </div>\n                    </li>\n                    <li class="list_sum">\n                        <p class="sum_price">￥'+n.tejia*n.shuliang+'</p>\n                    </li>\n                    <li class="list_op">\n                        <p class="del"><a href="javascript:;" class="delBtn">移除商品</a></p>\n                    </li>\n                    </ul>\n        \t\t'});$(".order_content").html(a);var e='\n        \t<div class="all_check">\n                    \n                    <input type="checkbox" id="shop_a" class="shopChoice">\n                    <label for="shop_a" class="shop"></label>\n                </div>\n                <div class="shop_name">\n                    店铺：<a href="javascript:;">'+i.list2[0].brand+"</a>\n                </div>\n        \t";$(".shop_info").html(e)}}}),$(".order_content").unbind().on("click",".delBtn",function(){$index=$(this).parent().parent().parent(),$.ajax({url:"../api/login.php",type:"post",async:!0,data:{leixing:"shanchuGoods",id:parseInt($index.attr("id").slice(5))},success:function(n){var i=JSON.parse(n);console.log(i)}}),$index.remove(),n()}),$(".order_content").on("click",".plus",function(){$jia=$(this).prev().attr("value"),$jia++,console.log("jiajia"),$(this).prev().attr("value",$jia),$index=$(this).parent().parent().parent(),$.ajax({url:"../api/login.php",type:"post",async:!0,data:{leixing:"xiugai",id:parseInt($index.attr("id").slice(5)),number:$(this).prev().attr("value")},success:function(n){var i=JSON.parse(n);console.log(i)}}),n()}),$(".order_content").on("click",".reduce",function(){$jian=$(this).next().attr("value"),2<=$jian&&($jian--,console.log("jianjian"),$(this).next().attr("value",$jian),$index=$(this).parent().parent().parent(),$.ajax({url:"../api/login.php",type:"post",async:!0,data:{leixing:"xiugai",id:parseInt($index.attr("id").slice(5)),number:$(this).next().attr("value")},success:function(n){var i=JSON.parse(n);console.log(i)}}),n())}),$("#all").click(function(){$("input[type='checkbox']").prop("checked",this.checked),n()}),$(".cartMain").on("click",".shop_info input",function(){$(".order_content input[type='checkbox']").prop("checked",this.checked)}),$(".cartMain").on("change","input[type='checkbox']",function(){$("input[type='checkbox']").not("input:checked").size()<=0?($("#all").prop("checked",!0),console.log(555)):$(".cartMain .order_content input:checked").size()>=$(".cartMain .order_content input[type='checkbox']").size()?($("#all").prop("checked",!0),$(".shop_info input").prop("checked",!0)):($("#all").prop("checked",!1),$(".shop_info input").prop("checked",!1)),n()}),$(".calBtn").click(function(){console.log(3)})});